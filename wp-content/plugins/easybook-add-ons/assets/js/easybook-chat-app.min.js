!function r(c,i,s){function l(t,e){if(!i[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=i[t]={exports:{}};c[t][0].call(o.exports,function(e){return l(c[t][1][e]||e)},o,o.exports,r,c,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkAvailability=function(t){return function(n){var e={action:"check_availability",_wpnonce:_easybook_add_ons.nonce,listing_id:_easybook_add_ons.post_id};return e=Object.assign({},t,e),axios.post(_easybook_add_ons.url,Qs.stringify(e)).then(function(e){var t;e.data.success&&n((t=e.data,{type:a.CHECK_AVAILABILITY_SUCCESS,data:t}))}).catch(function(e){console.log(e)})}};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./actionTypes"))},{"./actionTypes":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.GET_ROOMS_SUCCESS="GET_ROOMS_SUCCESS",n.CHECK_AVAILABILITY_SUCCESS="CHECK_AVAILABILITY_SUCCESS"},{}],3:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=i(e("../actions/BookingActions")),m=c(e("./RoomSelected")),y=c(e("./CheckInOut")),b=c(e("./LoadingIndicator")),v=i(e("../utils/helpers"));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=ReactRedux.connect,d=function(e){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e)),n=1,a=0,o=v.getDate(),r=v.getDate(null,1),c=Cookies.get("esb_checkin"),i=Cookies.get("esb_checkout");return c&&i&&new Date(c)>=new Date&&(o=c,r=i),null!=Cookies.get("esb_adults")&&(n=parseInt(Cookies.get("esb_adults"))),null!=Cookies.get("esb_children")&&(a=parseInt(Cookies.get("esb_children"))),t.format="YYYY-MM-DD",null!=t.props.format&&""!=t.props.format&&(t.format=t.props.format),t.state={adults:n,children:a,checkin:o,checkout:r,selected:[],selected_services:[],booked:[],bookable:!1,checkavailable:!0,checkingavai:!1,submit:!1},t.formRef=null,t.setFormRef=t.setFormRef.bind(t),t.checkAvailability=t.checkAvailability.bind(t),t.onSelectRoom=t.onSelectRoom.bind(t),t.getCheckInOut=t.getCheckInOut.bind(t),t.onChange=t.onChange.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t.onChangeRoomQtt=t.onChangeRoomQtt.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onClickSubmit=t.onClickSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleClick=t.handleClick.bind(t),t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,React.Component),o(s,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=t.vals;t.metas;null!=n&&Array.isArray(n)&&2==n.length&&this.setState({checkin:this._formatOutDate(n[0]),checkout:this._formatOutDate(n[1])})}}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",o="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),o=e.substr(6,2),1==t?n+"-"+a+"-"+o:this.format.replace("YYYY",n).replace("MM",a).replace("DD",o)):""}},{key:"_renderCusHtml",value:function(){var e=document.getElementById("tmpl-custom-get-field").innerHTML;return""!=e&&React.createElement("div",{className:"cus-field-bk-content",dangerouslySetInnerHTML:{__html:e}})}},{key:"setFormRef",value:function(e){this.formRef=e}},{key:"componentWillReceiveProps",value:function(e){this.setState({booked:[],checkingavai:!1})}},{key:"checkAvailability",value:function(e){this.setState({bookable:!1,checkavailable:!1,checkingavai:!0}),this.props.checkAvailability(this.state)}},{key:"onChange",value:function(e,t){var n;this.setState((u(n={},t,e.target.value),u(n,"checkavailable",!0),n))}},{key:"handleChange",value:function(t,e){var n=e.target.value,a=this.state.selected_services,o=a.findIndex(function(e){return e.id==t});-1!==o?a.splice(o,1):a.push({id:t,price:n,qtt:1}),this.setState({selected_services:a})}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"getCheckInOut",value:function(e){Array.isArray(e)&&2==e.length&&this.setState({checkin:e[0],checkout:e[1],checkavailable:!0})}},{key:"onClickQtt",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",n=arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,r=this.state[n];"down"==t&&a<r?--r:"up"==t&&r<o&&++r,this.setState((u(e={},n,r),u(e,"checkavailable",!0),e))}},{key:"onChangeRoomQtt",value:function(e,t,n){var a=this.state,o=a.booked,r=a.bookable;if(Array.isArray(o)){var c=o.find(function(e){return e.id==t});if(null!=c){var i=o.indexOf(c);0<e?(c.qtt=e,o[i]=c):o.splice(i,1)}else 0<e&&o.push({id:t,qtt:e,price:n});r=0<o.length}this.setState({booked:o,bookable:r})}},{key:"onSelectRoom",value:function(e){var t=e.target.value,n=this.state.selected;-1===n.indexOf(t)&&this.setState({selected:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])})}},{key:"onClickSubmit",value:function(e){this.setState({submit:!0,bookable:!1,checkavailable:!1})}},{key:"onSubmit",value:function(e){this.state.submit||e.preventDefault()}},{key:"componentDidUpdate",value:function(e,t){this.state.submit&&this.formRef.submit()}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.checkin,a=t.checkout,o=0;if(""!=n&&""!=a){var r=new Date(n),c=new Date(a);o=Math.floor((c-r)/864e5),1==e&&++o}return o}},{key:"render",value:function(){var c=this,e=this.props.booking,i=e.rooms,t=e.available,n=e.services,a=this.state,s=a.booked,o=(a.selected,a.submit),r=a.bookable,l=a.checkavailable,u=a.checkingavai,d=a.selected_services,p=[],f=0;null!=i&&i.length&&(Array.isArray(t)&&t.length&&t.forEach(function(t,e){if(0<parseInt(t.quantities)){var n=i.find(function(e){return e.id==t.id}),a=s.find(function(e){return e.id==t.id}),o=0;null!=a&&(o=a.qtt);var r=Object.assign({},n);r=Object.assign(r,t,{available:!0,qtt:o}),p.push(React.createElement(m.default,{key:e,room:r,changeRoomQtt:c.onChangeRoomQtt}))}}),0==p.length&&(p=React.createElement("div",null,"There is no available rooms. Please try with different days.")));var _=[];null!=n&&n.length&&n.forEach(function(t,e){var n=d.findIndex(function(e){return e.id==t.service_id});_.push(React.createElement("div",{key:e,className:"cth-dropdown-item lserv-dropdown"},React.createElement("input",{name:t.service_id,onChange:function(e){return c.handleChange(t.service_id,e)},type:"checkbox",value:t.service_price,defaultChecked:-1!==n,id:t.service_id}),React.createElement("label",{htmlFor:t.service_id},t.service_name,React.createElement("span",{className:"cth-dropdown-meta"},v.price_format(t.service_price)))))});var h=[];if(Array.isArray(s)&&s.length){o&&(s.forEach(function(e,t){var n="rooms["+e.id+"]";h.push(React.createElement("input",{key:t,type:"hidden",name:n,value:e.qtt,readOnly:!0}))}),d.forEach(function(e,t){var n="addservices["+t+"]";h.push(React.createElement("input",{key:"addservices_"+t,type:"hidden",name:n,value:e.id,readOnly:!0}))}),h.push(React.createElement("input",{key:"product_id",type:"hidden",name:"product_id",value:_easybook_add_ons.post_id,readOnly:!0})),h.push(React.createElement("input",{key:"esb_add_to_cart",type:"hidden",name:"action",value:"esb_add_to_cart",readOnly:!0})));f=s.reduce(function(e,t){return e+parseInt(t.qtt)*parseFloat(t.price)},0),null!=d&&d.length&&d.forEach(function(e,t){f+=parseFloat(e.price)*parseFloat(e.qtt)}),f*=this._getDatesDiff(!1)}return React.createElement("form",{method:"post",className:"book-formsss custom-formsss",onSubmit:this.onSubmit,ref:this.setFormRef},React.createElement("fieldset",null,React.createElement("div",{className:"cal-item"},React.createElement(y.default,{fieldName:"checkinout",fieldValue:[this.state.checkin,this.state.checkout],field:{label:_easybook_add_ons.i18n.book_dates,icon:"fa fa-calendar",format:this.format},getCheckInOut:this.getCheckInOut}),React.createElement("input",{type:"hidden",name:"checkout",value:this.state.checkout,readOnly:!0}),React.createElement("input",{type:"hidden",name:"checkin",value:this.state.checkin,readOnly:!0})),React.createElement("div",{className:"cal-item guests-inputs"},React.createElement("div",{className:"qtt-item fl-wrap"},React.createElement("label",{className:"qtt-label"},_easybook_add_ons.i18n.book_ad),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"adults",min:"1",max:"10",step:"1",value:this.state.adults,onChange:function(e){return c.onChange(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return c.onClickQtt("up","adults",1,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return c.onClickQtt("down","adults",1,10)}},"-")))),React.createElement("div",{className:"qtt-item fl-wrap"},React.createElement("label",{className:"qtt-label"},_easybook_add_ons.i18n.book_chi),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"children",min:"0",max:"10",step:"1",value:this.state.children,onChange:function(e){return c.onChange(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return c.onClickQtt("up","children",0,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return c.onClickQtt("down","children",0,10)}},"-"))))),u?React.createElement(b.default,null):0<p.length&&React.createElement("div",{className:"cal-item"},React.createElement("div",{className:"available-rooms"},React.createElement("label",null,_easybook_add_ons.i18n.book_avr),p,[]),0<n.length&&React.createElement("div",{className:"cth-dropdown-warp"},React.createElement("div",{className:"cth-dropdown-header",onClick:this.handleClick},React.createElement("label",null,_easybook_add_ons.i18n.book_services,React.createElement("span",{className:"count-select-ser"},d.length))),this.state.isToggleOn?React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},_)):null)),this._renderCusHtml(),React.createElement("div",{className:"total-coast fl-wrap clearfix"},React.createElement("strong",null,_easybook_add_ons.i18n.book_ts),React.createElement("span",null,v.price_format(f))),React.createElement("div",{className:"booking-buttons"},React.createElement("button",{type:"button",onClick:this.checkAvailability,className:"btn-check-availability",disabled:!l},_easybook_add_ons.i18n.book_chev),React.createElement("button",{type:"button",onClick:this.onClickSubmit,className:"btn-book-now",disabled:!r},_easybook_add_ons.i18n.book_bn))),h)}}]),s}();n.default=s(function(e){return{booking:e.booking}},function(t){return{checkAvailability:function(e){return t(r.checkAvailability(e))}}})(d)},{"../actions/BookingActions":1,"../utils/helpers":10,"./CheckInOut":4,"./LoadingIndicator":5,"./RoomSelected":6}],4:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function i(e){s(this,i);var t=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.fieldName="";var n=t.props,a=n.fieldName,o=n.fieldValue,r=n.field;null!=a&&(t.fieldName=a);var c=t.parseFieldValue(o);return t.state={vals:c,current:0,show_selector:!1},t.options={showing:1,max:12},t.format="YYYY-MM-DD",null!=r&&null!=r.format&&""!=r.format&&(t.format=r.format),t.wrapperRef=null,t.toggleDate=t.toggleDate.bind(t),t.switchMonth=t.switchMonth.bind(t),t.onFocusInput=t.onFocusInput.bind(t),t.setWrapperRef=t.setWrapperRef.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t.onClickApply=t.onClickApply.bind(t),t.onClickCancel=t.onClickCancel.bind(t),t}return c(i,React.Component),r(i,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside,!0)}},{key:"handleClickOutside",value:function(e){1==this.state.show_selector&&this.wrapperRef&&0==this.wrapperRef.contains(e.target)&&this.setState({show_selector:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this.parseFieldValue(e.fieldValue);this.setState({vals:t})}},{key:"parseFieldValue",value:function(e){var t=[];if(null!=e&&Array.isArray(e)&&2==e.length){var n=/-/gm;t=[e[0].replace(n,""),e[1].replace(n,"")]}return(t=t.filter(function(e,t,n){return n.indexOf(e)===t})).length<2&&(t=[]),t}},{key:"onFocusInput",value:function(e){this.setState({show_selector:!0})}},{key:"onClickCancel",value:function(){this.setState({vals:[],show_selector:!1}),this.props.getCheckInOut(["",""])}},{key:"onClickApply",value:function(){this.setState({show_selector:!1})}},{key:"switchMonth",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"next",t=this.options.max,n=this.state.current;"next"==e?n<t&&++n:0<n&&--n,this.setState({current:n})}},{key:"toggleDate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.state.vals;Array.isArray(n)&&(2<=n.length?n=[e]:1==n.length?t?n=[e]:n[0]<=e?n.push(e):n=[e]:n=[e],2==n.length?(this.props.getCheckInOut([this._formatOutDate(n[0]),this._formatOutDate(n[1])]),this.setState({show_selector:!1})):this.setState({vals:n}))}},{key:"_fieldClass",value:function(){var e="submit-field";return 1==this.state.show_selector&&(e+=" show-selector"),e}},{key:"_renderFieldHeader",value:function(){var e=this.props.field;return React.createElement("div",{className:"lfield-header"},""!=e.label&&React.createElement("label",{className:"lfield-label"},e.label),""!=e.icon&&React.createElement("span",{className:"lfield-icon"},React.createElement("i",{className:e.icon})))}},{key:"_getMonthDatas",value:function(e){var t=this.state.vals;null!=e&&"function"==typeof e.getMonth||(e=new Date);var n=new Date,a=e.getFullYear(),o=e.getMonth(),r=this._getMonthNum(o),c=new Date(a,o,1),i=new Date(a,o+1,0),s=c.getDay(),l=i.getDate();n=new Date(n.getFullYear(),n.getMonth(),n.getDate());var u=[];if(0!==s)for(var d=0;d<s;d++)u.push({iso_date:"2018-12-16",date:0,status:"prev",time:"",selected:!1,first:!1,last:!1,inside:!1});for(var p=1;p<=l;p++){var f=new Date(a,o,p),_=this._getDateNum(p),h=""+a+r+_,m=a+"-"+r+"-"+_,y=!1,b=!1,v=!1,S=!1;2==t.length?(h==t[0]&&(b=y=!0),h==t[1]&&(v=y=!0),t[0]<h&&h<t[1]&&(S=!0)):1==t.length&&h==t[0]&&(b=y=!0),u.push({iso_date:m,date:p,status:f<n?"past":"available",time:h,selected:y,first:b,last:v,inside:S})}return u}},{key:"_getMonthNum",value:function(e){return(e=parseInt(e)+1)<10?"0"+e:e}},{key:"_getDateNum",value:function(e){return e<10?"0"+e:e}},{key:"_renderDays",value:function(){var n=[];return _easybook_add_ons.i18n.days.forEach(function(e,t){return n.push(React.createElement(u,{key:t,day:e}))}),React.createElement("div",{className:"cal-days"},n)}},{key:"_getMonthString",value:function(e){null!=e&&"function"==typeof e.getMonth||(e=new Date);var t=e.getFullYear(),n=e.getMonth();return t+" "+_easybook_add_ons.i18n.months[n]}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",o="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),o=e.substr(6,2),1==t?n+"-"+a+"-"+o:this.format.replace("YYYY",n).replace("MM",a).replace("DD",o)):""}},{key:"_renderStringValue",value:function(){var e=this.state.vals,t="";return 2==e.length&&(t+=this._formatOutDate(e[0],!1),t+=" -> ",t+=this._formatOutDate(e[1],!1)),t}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state.vals,n=0;if(2==t.length){var a=new Date(this._formatOutDate(t[0])),o=new Date(this._formatOutDate(t[1]));n=Math.floor((o-a)/864e5),1==e&&++n}return n}},{key:"_renderMonthFooter",value:function(){return this.state.vals.length<2&&" disabled",React.createElement("div",{className:"cal-months-footer"},React.createElement("span",{className:"selected-date"},this._renderStringValue()),React.createElement("button",{className:"btn-cal-cancel",type:"button",onClick:this.onClickCancel},_easybook_add_ons.i18n.checkout_can))}},{key:"_renderSelector",value:function(){var i=this,e=this.options,t=e.showing,n=e.max,s=this.state.current,a="cal-month-nav month-next",o="cal-month-nav month-prev";s<=0&&(o+=" month-disabled"),n<=s&&(a+=" month-disabled");for(var r=React.createElement("article",{className:"cal-months-header"},React.createElement("div",{className:o,onClick:function(e){return i.switchMonth("prev")}},React.createElement("span",null)),React.createElement("div",{className:a,onClick:function(e){return i.switchMonth("next")}},React.createElement("span",null))),l=[],c=function(e){var t=new Date,n=t.getFullYear(),a=t.getMonth(),o=new Date(n,a+s+e,1),r=i._getMonthDatas(o),c=[];r.forEach(function(e,t){return c.push(React.createElement(p,{key:t,date:e,toggleDate:i.toggleDate}))}),l.push(React.createElement("div",{key:e,className:"cal-month"},React.createElement("div",{className:"cal-month-header"},React.createElement("div",{className:"cal-month-string"},i._getMonthString(o))),React.createElement("div",{className:"cal-dates-wrap"},i._renderDays(),React.createElement("div",{className:"cal-dates"},c))))},u=0;u<t;u++)c(u);var d="cal-months-wrap months-"+this.options.showing;return React.createElement("div",{className:"lfield-content checkinout-field"},React.createElement("div",{className:d},r,l,this._renderMonthFooter()))}},{key:"render",value:function(){var e=this.options;e.showing,e.max,this.state.current;return React.createElement("div",{className:this._fieldClass(),ref:this.setWrapperRef},null!=this.props.field&&this._renderFieldHeader(),React.createElement("input",{type:"text",className:"in-out-dates",value:this._renderStringValue(),readOnly:!0,onFocus:this.onFocusInput}),React.createElement("div",{className:"in-out-count"},React.createElement("i",{className:"fa fa-question-circle"}),React.createElement("span",null,"Nights : ",React.createElement("strong",null,this._getDatesDiff(!1)))),1==this.state.show_selector&&this._renderSelector())}}]),i}();n.default=i;var p=function(e){function n(e){s(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state=t.props.date,t.onToggle=t.onToggle.bind(t),t}return c(n,React.Component),r(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(e.date)}},{key:"onToggle",value:function(e){var t=this.state,n=t.time,a=t.status,o=t.selected;"available"===a&&this.props.toggleDate(n,o)}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.date,a="cal-date";return a+="prev"===t?" cal-date-diff":"past"===t?" cal-date-past":" cal-date-available",e.selected&&(a+=" cal-date-checked"),e.first&&(a+=" cal-date-cfirst"),e.last&&(a+=" cal-date-clast"),e.inside&&(a+=" cal-date-inside"),React.createElement("div",{className:a,onClick:this.onToggle},("available"==t||"past"==t)&&React.createElement("span",null,n))}}]),n}(),u=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,React.Component),r(t,[{key:"render",value:function(){var e=this.props.day;return React.createElement("div",{className:"cal-day"},e)}}]),t}()},{}],5:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){var e="loading-indicator";return null!=this.props.class&&(e+=" "+this.props.class),React.createElement("div",{className:e},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))}}]),t}();n.default=c},{}],6:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var o=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=t.props.room;t.state={qtt:n.qtt};var a=5;return parseInt(n.quantities)<a&&(a=parseInt(n.quantities)),t.max_qtt=a,t.onChangeQtt=t.onChangeQtt.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,React.Component),c(o,[{key:"componentWillReceiveProps",value:function(e){var t=e.room;this.setState({qtt:t.qtt})}},{key:"onChangeQtt",value:function(e){this.handleQttChange(e.target.value)}},{key:"handleQttChange",value:function(e){var t=this.props.room;0<=e&&(this.setState({qtt:e}),t.available&&this.props.changeRoomQtt(e,t.id,t.price))}},{key:"onClickQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,a=this.state.qtt;"down"==e&&t<a?--a:"up"==e&&a<n&&++a,this.handleQttChange(a)}},{key:"render",value:function(){var t=this,e=this.props.room,n=parseInt(e.adults)+parseInt(e.children);return React.createElement("div",{className:"room-selected"},React.createElement("div",{className:"room-title"},React.createElement("a",{herf:"#",className:"ajax-link","data-roomid":e.id},e.title)),React.createElement("div",{className:"room-details"},React.createElement("div",{className:"room-meta"},React.createElement("span",{className:"room-available"},React.createElement("strong",null,_easybook_add_ons.i18n.roomsl_avai)," ",e.quantities),React.createElement("span",{className:"room-adults"},React.createElement("strong",null,_easybook_add_ons.i18n.roomsl_maxg)," ",n)),e.available&&React.createElement("div",{className:"room-qtt"},React.createElement("label",null,_easybook_add_ons.i18n.roomsl_quan),React.createElement("input",{type:"number",min:"0",step:"1",max:this.max_qtt,value:this.state.qtt,readOnly:!0,onChange:this.onChangeQtt}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("up",0,t.max_qtt)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("down",0,t.max_qtt)}},"-")))))}}]),o}();n.default=o},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.default.booking,t=arguments[1];switch(t.type){case c.CHECK_AVAILABILITY_SUCCESS:return Object.assign({},e,{rooms:t.data.rooms,available:t.data.available,services:t.data.add_services});default:return e}};var a,o=e("./initialState"),r=(a=o)&&a.__esModule?a:{default:a},c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../actions/actionTypes"))},{"../actions/actionTypes":2,"./initialState":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=e("./Booking"),r=(a=o)&&a.__esModule?a:{default:a};var c=Redux.combineReducers;n.default=c({booking:r.default})},{"./Booking":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={booking:{rooms:[],available:[],services:[]}}},{}],10:[function(e,t,n){"use strict";function i(e){return(e=parseInt(e)+1)<10?"0"+e:e}function s(e){return e<10?"0"+e:e}Object.defineProperty(n,"__esModule",{value:!0}),n.getDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);var a=e.getDate();null==t||isNaN(parseInt(t))||(a+=parseInt(t),e.setDate(a));a=e.getDate();var o=e.getFullYear(),r=i(e.getMonth()),c=s(a);return""!=n?n.replace(/YYYY/g,o).replace(/MM/g,r).replace(/DD/g,c):e.toString()},n.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},n.price_to_usd=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];null!=_easybook_add_ons.currency?(e=(e+"").replace(new RegExp("."==_easybook_add_ons.currency.ths_sep?"\\.":_easybook_add_ons.currency.ths_sep,"g"),"").replace(_easybook_add_ons.currency.dec_sep,"."),e=parseFloat(e)/parseFloat(_easybook_add_ons.currency.rate),t&&((_easybook_add_ons.currency.sb_pos="left")?e=_easybook_add_ons.currency.symbol+e:e+=_easybook_add_ons.currency.symbol)):t&&(e=_easybook_add_ons.base_currency.symbol+e);return e},n.price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(null!=_easybook_add_ons.currency){e=parseFloat(e)*parseFloat(_easybook_add_ons.currency.rate);var n=parseInt(_easybook_add_ons.currency.decimal);if(0<n){var a=new RegExp("."==_easybook_add_ons.currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_easybook_add_ons.currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_easybook_add_ons.currency.dec_sep).replace(a,"$1"+_easybook_add_ons.currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_easybook_add_ons.currency.ths_sep);t&&((_easybook_add_ons.currency.sb_pos="left")?e=_easybook_add_ons.currency.symbol+e:(_easybook_add_ons.currency.sb_pos="left_space")?e=_easybook_add_ons.currency.symbol+" "+e:(_easybook_add_ons.currency.sb_pos="right_space")?e+=" "+_easybook_add_ons.currency.symbol:e+=_easybook_add_ons.currency.symbol)}else t&&(e=_easybook_add_ons.currency.symbol+e);return e},n.base_price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(null!=_easybook_add_ons.base_currency){e=parseFloat(e)*parseFloat(_easybook_add_ons.base_currency.rate);var n=parseInt(_easybook_add_ons.base_currency.decimal);if(0<n){var a=new RegExp("."==_easybook_add_ons.base_currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_easybook_add_ons.base_currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_easybook_add_ons.base_currency.dec_sep).replace(a,"$1"+_easybook_add_ons.base_currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_easybook_add_ons.base_currency.ths_sep);t&&((_easybook_add_ons.base_currency.sb_pos="left")?e=_easybook_add_ons.base_currency.symbol+e:(_easybook_add_ons.base_currency.sb_pos="left_space")?e=_easybook_add_ons.base_currency.symbol+" "+e:(_easybook_add_ons.base_currency.sb_pos="right_space")?e+=" "+_easybook_add_ons.base_currency.symbol:e+=_easybook_add_ons.base_currency.symbol)}return e},n.currency_symbol=function(){return null!=_easybook_add_ons.currency&&null!=_easybook_add_ons.currency.symbol?_easybook_add_ons.currency.symbol:_easybook_add_ons.base_currency.symbol},n.getWithdrawalDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);if(e.getDate()>t){var a=e.getMonth();e.setMonth(a+1,t)}else e.setDate(t);var o=e.getFullYear(),r=i(e.getMonth()),c=s(t);return""!=n?n.replace(/YYYY/g,o).replace(/MM/g,r).replace(/DD/g,c):e.toString()}},{}],11:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),c=u(e("./src/components/ChatsFrontend")),i=u(e("./bookingsrc/components/BookingForm")),s=u(e("./chatsrc/reducers")),l=u(e("./bookingsrc/reducers"));function u(e){return e&&e.__esModule?e:{default:e}}var d=ReactRedux.Provider,p=Redux,f=p.createStore,_=p.applyMiddleware,h=f(s.default,_(ReduxThunk.default)),m=f(l.default,_(ReduxThunk.default)),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){return React.createElement(c.default,null)}}]),t}(),b=document.querySelector("#chat-app");null!=b&&ReactDOM.render(React.createElement(d,{store:h},React.createElement(y,null)),b);var v=document.querySelector("#bookingform-app");if(null!=v){var S="";v.hasAttribute("data-format")&&(S=v.getAttribute("data-format")),ReactDOM.render(React.createElement(d,{store:m},React.createElement(i.default,{format:S})),v)}},{"./bookingsrc/components/BookingForm":3,"./bookingsrc/reducers":8,"./chatsrc/reducers":12,"./src/components/ChatsFrontend":16}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=e("../../src/reducers/ChatReducer"),r=(a=o)&&a.__esModule?a:{default:a};var c=Redux.combineReducers;n.default=c({chats:r.default})},{"../../src/reducers/ChatReducer":19}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getContacts=function(){return function(a){var e={action:"easybook_addons_chat_contacts",_nonce:_easybook_add_ons.nonce,for:_easybook_add_ons.curr_user.id};return axios.post(_easybook_add_ons.url,Qs.stringify(e)).then(function(e){var t,n;e.data.success&&a((t=e.data.chat,{type:c.GET_CONTACTS_SUCCESS,chat:t,firstLoaded:n}))}).catch(function(e){console.log(e)})}},n.changeContact=function(n){return function(e){var t;e((t=n,{type:c.CHANGE_CONTACT_SUCCESS,contact:t}))}},n.getReplies=function(t,o){return function(a){var e={action:"easybook_addons_chat_replies",_nonce:_easybook_add_ons.nonce,cid:t};return o&&(e.lastRID=o),axios.post(_easybook_add_ons.url,Qs.stringify(e)).then(function(e){var t,n;e.data.success&&a((t=e.data.replies,n=o,{type:c.GET_REPLIES_SUCCESS,replies:t,lastRID:n}))}).catch(function(e){console.log(e)})}},n.chatReply=function(t,a,o,r){return function(n){var e={action:"easybook_addons_chat_reply",_nonce:_easybook_add_ons.nonce,cid:t,user_id:a,touid:o,reply_text:r};return axios.post(_easybook_add_ons.url,Qs.stringify(e)).then(function(e){var t;e.data.success&&n((t=e.data.reply,{type:c.REPLY_SUCCESS,reply:t}))}).catch(function(e){console.log(e)})}},n.updateFirstLastRID=function(a,o){return function(e){var t,n;e((t=a,n=o,{type:c.UPDATE_FIRST_LAST_RID_SUCCESS,firstRID:t,lastRID:n}))}},n.getMoreTopReplies=function(t,a){return function(n){var e={action:"easybook_addons_chat_replies",_nonce:_easybook_add_ons.nonce,cid:t,firstRID:a};return axios.post(_easybook_add_ons.url,Qs.stringify(e)).then(function(e){var t;e.data.success&&n((t=e.data.replies,{type:c.GET_MORE_TOP_REPLIES_SUCCESS,replies:t}))}).catch(function(e){console.log(e)})}},n.resetChatsState=function(){return{type:c.RESET_CHATS_STATE_SUCCESS}};var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./actionTypes"))},{"./actionTypes":14}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.GET_POSTS_SUCCESS="GET_POSTS_SUCCESS",n.GET_LISTINGS_SUCCESS="GET_LISTINGS_SUCCESS",n.LISTINGS_DELETED="LISTINGS_DELETED",n.GET_EDIT_LISTING_SUCCESS="GET_EDIT_LISTING_SUCCESS",n.GET_EDIT_LISTING_ERROR="GET_EDIT_LISTING_ERROR",n.SUBMIT_LISTING_SUCCESS="SUBMIT_LISTING_SUCCESS",n.RESET_REDIRECTION="RESET_REDIRECTION",n.SET_LISTING_TYPE_SUCCESS="SET_LISTING_TYPE_SUCCESS",n.GET_CONTACTS_SUCCESS="GET_CONTACTS_SUCCESS",n.GET_REPLIES_SUCCESS="GET_REPLIES_SUCCESS",n.GET_MORE_TOP_REPLIES_SUCCESS="GET_MORE_TOP_REPLIES_SUCCESS",n.CHANGE_CONTACT_SUCCESS="CHANGE_CONTACT_SUCCESS",n.REPLY_SUCCESS="REPLY_SUCCESS",n.UPDATE_FIRST_LAST_RID_SUCCESS="UPDATE_FIRST_LAST_RID_SUCCESS",n.RESET_CHATS_STATE_SUCCESS="RESET_CHATS_STATE_SUCCESS",n.GET_REVIEWS_SUCCESS="GET_REVIEWS_SUCCESS ",n.GET_BOOKING_SUCCESS="GET_BOOKING_SUCCESS ",n.BOOKING_DELETED="BOOKING_DELETED",n.BOOKING_CANCEL="BOOKING_CANCEL",n.BOOKING_APPROVE="BOOKING_APPROVE",n.ON_CHANGE_PROFILE_SUCCESS="ON_CHANGE_PROFILE_SUCCESS",n.GET_PROFILE_SUCCESS="GET_PROFILE_SUCCESS",n.SAVE_PROFILE_SUCCESS="SAVE_PROFILE_SUCCESS",n.CHANGE_PASS_SUCCESS="CHANGE_PASS_SUCCESS",n.GET_CONTENT_SUCCESS="GET_CONTENT_SUCCESS",n.GET_DASHBOARD_CONTENTS_SUCCESS="GET_DASHBOARD_CONTENTS_SUCCESS",n.DELETE_ACTIVITY_SUCCESS="DELETE_ACTIVITY_SUCCESS",n.GET_FIELD_ROOMS_SUCCESS="GET_FIELD_ROOMS_SUCCESS",n.GET_DATA_ROOMS_SUCCESS="GET_DATA_ROOMS_SUCCESS",n.SUBMIT_ROOM_SUCCESS="SUBMIT_ROOM_SUCCESS",n.GET_EDIT_ROOM_SUCCESS="GET_EDIT_ROOM_SUCCESS",n.GET_EDIT_ROOM_ERROR="GET_EDIT_ROOM_ERROR",n.GET_DATA_CHART_SUCCESS="GET_DATA_CHART_SUCCESS",n.GET_DATA_SIDEBAR_SUCCESS="GET_DATA_SIDEBAR_SUCCESS",n.TO_ADD_ROOM_SCREEN="TO_ADD_ROOM_SCREEN",n.DELETE_LISTING_ROOM="DELETE_LISTING_ROOM",n.GET_WITHDRAWALS_SUCCESS="GET_WITHDRAWALS_SUCCESS",n.MESSAGES_RESET_SUCCESS="MESSAGES_RESET_SUCCESS",n.MESSAGES_DELETE_SUCCESS="MESSAGES_DELETE_SUCCESS",n.MESSAGES_ADD_SUCCESS="MESSAGES_ADD_SUCCESS",n.GET_INVOICES_SUCCESS="GET_INVOICES_SUCCESS",n.GET_INVOICE_SUCCESS="GET_INVOICE_SUCCESS",n.GET_EARNINGS_SUCCESS="GET_EARNINGS_SUCCESS",n.GET_ADCAMPAIGNS_SUCCESS="GET_ADCAMPAIGNS_SUCCESS"},{}],15:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),c=s(e("./inners/Contact")),i=s(e("./inners/Reply"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.props.chats;return t.state={isLoggedIn:!1,reply_text:"",inputFocus:!1},t.scrollAtBottom=!0,t.top_loading=!1,t.timeout=null,t.handleChange=t.handleChange.bind(t),t.handleSubmit=t.handleSubmit.bind(t),t.changeContact=t.changeContact.bind(t),t.onRepliesListScroll=t.onRepliesListScroll.bind(t),t.inputFocus=t.inputFocus.bind(t),t.inputBlur=t.inputBlur.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,React.Component),r(n,[{key:"componentDidMount",value:function(){var e=this.props.chats;_easybook_add_ons.curr_user.id&&(this.setState({isLoggedIn:!0}),0==e.firstLoaded&&this.props.getContacts(),this.getRepliesTimeoutFunction())}},{key:"getRepliesTimeoutFunction",value:function(){var e=this;this.props.getReplies(this.props.chats.active,this.props.chats.lastRID);var t=1e4,n=this.props.chats;5<n.noReplyNum&&(t*=5),10<n.noReplyNum&&(t*=10),20<n.noReplyNum&&(t*=20),this.timeout=setTimeout(function(){e.getRepliesTimeoutFunction()},t)}},{key:"componentWillUpdate",value:function(e){if(this.historyChanged=e.chats.replies.length!==this.props.chats.replies.length,this.historyChanged){var t=this.refs.repliesList;if(null==t)return;var n=t.scrollTop,a=t.scrollHeight-t.clientHeight;if(this.scrollAtBottom=a<=0||a-200<=n,!this.scrollAtBottom&&n<150){var o=t.childNodes.length;this.topReply=0===o?null:t.childNodes[0]}else this.topReply=null}}},{key:"componentDidUpdate",value:function(){if(this.historyChanged){this.scrollAtBottom&&this.scrollToBottom(),null!=this.topReply&&ReactDOM.findDOMNode(this.topReply).scrollIntoView();var e=this.props.chats,n=0,a=0;e.replies.map(function(e,t){0===t&&(n=e.crid),a=e.crid}),this.props.updateFirstLastRID(n,a),this.top_loading=!1}}},{key:"componentWillUnmount",value:function(){null!=this.timeout&&clearTimeout(this.timeout)}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState({reply_text:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.chatReply(this.props.chats.active,_easybook_add_ons.curr_user.id,this.props.chats.touid,this.state.reply_text),this.setState({reply_text:""})}},{key:"changeContact",value:function(e,t){t.preventDefault(),e.cid!=this.props.chats.active&&(this.props.changeContact(e),this.props.getReplies(e.cid,!1))}},{key:"onRepliesListScroll",value:function(){if(null!=this.refs.repliesList){var e=this.props.chats,t=this.refs.repliesList.scrollTop;e.firstRemain&&!1===this.top_loading&&0===t&&(this.top_loading=!0,this.props.getMoreTopReplies(e.active,e.firstRID))}}},{key:"scrollToBottom",value:function(){var e=this.refs.repliesList;if(null!=e){var t=e.scrollHeight-e.clientHeight;null!=this.state.inputFocus&&this.state.inputFocus&&(t+=50),ReactDOM.findDOMNode(e).scrollTop=0<t?t:0}}},{key:"inputFocus",value:function(){var e=this;this.setState({inputFocus:!0}),setTimeout(function(){e.scrollToBottom()},100)}},{key:"inputBlur",value:function(){this.setState({inputFocus:!1})}},{key:"render",value:function(){var n=this;this.props.chats;return React.createElement("section",{className:"middle-padding"},React.createElement("div",{className:"container dashboard-container"},React.createElement("div",{className:"dasboard-wrap fl-wrap"},React.createElement("div",{className:"dashboard-content fl-wrap"},React.createElement("div",{className:"dashboard-list-box fl-wrap"},React.createElement("div",{className:"dashboard-header fl-wrap"},React.createElement("h3",null,_easybook_dashboard.i18n.chats_h3)),React.createElement("div",{id:"chat-wrapper",className:"row"},React.createElement("div",{className:"col-sm-8 chat-box-wrap"},React.createElement("div",{id:"chat-box",className:"chat-box fl-wrap grey-blue-bg loading-repliess",ref:"repliesList",onScroll:this.onRepliesListScroll},this.props.chats.replies.map(function(e,t){return React.createElement(i.default,{key:e.crid,item:e})}),this.state.inputFocus&&React.createElement("div",{className:"chat-replies-loading"},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{id:"chat-input-wrap",className:"message-input fl-wrap"},React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("textarea",{placeholder:_easybook_add_ons.i18n.chat_type_msg,required:!0,value:this.state.reply_text,onFocus:this.inputFocus,onBlur:this.inputBlur,onChange:this.handleChange}),React.createElement("button",{type:"submit"},React.createElement("i",{className:"fal fa-paper-plane"}))))),React.createElement("div",{id:"chat-contacts",className:"col-sm-4 chat-contacts-wrap"},React.createElement("div",{className:"chat-contacts fl-wrap"},this.props.chats.contacts.map(function(e,t){return React.createElement(c.default,{key:e.cid,item:e,activeContact:n.props.chats.active,changeContact:n.changeContact})})))))))))}}]),n}();n.default=l},{"./inners/Contact":17,"./inners/Reply":18}],16:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),c=u(e("./Chats")),i=u(e("./inners/Contact")),s=u(e("./inners/Reply")),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../actions/ChatActions"));function u(e){return e&&e.__esModule?e:{default:e}}var d=ReactRedux.connect,p=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={isLoggedIn:!1,reply_text:"",showContact:!0,showChatBox:!1,inputFocus:!1},t.showContact=t.showContact.bind(t),t.toggleChatBox=t.toggleChatBox.bind(t),t.inputFocus=t.inputFocus.bind(t),t.inputBlur=t.inputBlur.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,c.default),r(n,[{key:"componentDidMount",value:function(){var e=this.props.chats;_easybook_add_ons.curr_user.id&&(this.setState({isLoggedIn:!0}),0==e.firstLoaded&&this.props.getContacts())}},{key:"showContact",value:function(){null!=this.timeout&&clearTimeout(this.timeout),this.setState({showContact:!0})}},{key:"changeContact",value:function(e,t){c.default.prototype.changeContact.call(this,e,t),this.setState({showContact:!1}),this.getRepliesTimeoutFunction()}},{key:"_renderContacts",value:function(n){var a=this;return this.state.showContact&&React.createElement("div",{className:"chat-contacts-wrap"},React.createElement("div",{className:"chat-contacts fl-wrap"},n.contacts.map(function(e,t){return React.createElement(i.default,{key:e.cid,item:e,activeContact:n.active,changeContact:a.changeContact})})))}},{key:"inputFocus",value:function(){var e=this;this.setState({inputFocus:!0}),setTimeout(function(){e.scrollToBottom()},100)}},{key:"inputBlur",value:function(){this.setState({inputFocus:!1})}},{key:"_renderReplies",value:function(e){return 1!=this.state.showContact&&React.createElement("div",{className:"wrap-chat-box"},React.createElement("div",{className:"chat-box fl-wrap grey-blue-bg loading-repliess",ref:"repliesList",onScroll:this.onRepliesListScroll},e.replies.map(function(e,t){return React.createElement(s.default,{key:t,item:e})}),this.state.inputFocus&&React.createElement("div",{className:"chat-replies-loading"},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{id:"chat-input-wrap",className:"message-input fl-wrap"},React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("textarea",{placeholder:_easybook_add_ons.i18n.chat_type_msg,required:!0,value:this.state.reply_text,onFocus:this.inputFocus,onBlur:this.inputBlur,onChange:this.handleChange}),React.createElement("button",{type:"submit"},React.createElement("i",{className:"fal fa-paper-plane"})))))}},{key:"_renderToggleButton",value:function(){return this.state.isLoggedIn?React.createElement("div",{className:"chat-widget-button",onClick:this.toggleChatBox},React.createElement("i",{className:"fa fa-comments"}),React.createElement("span",null,_easybook_add_ons.i18n.chat_fr_owner)):React.createElement("div",{className:"chat-widget-button logreg-modal-open"},React.createElement("i",{className:"fa fa-comments"}),React.createElement("span",null,_easybook_add_ons.i18n.chat_fr_login))}},{key:"toggleChatBox",value:function(){this.setState({showChatBox:!this.state.showChatBox})}},{key:"render",value:function(){var e="",t=this.props.chats;if(null!=t&&null!=t.touid&&Array.isArray(t.contacts)&&t.contacts.length){var n=t.contacts.find(function(e){return e.uid==t.touid});n&&(e=n.display_name)}var a="chat-widget_wrap";return 1==this.state.showChatBox&&(a+=" show"),React.createElement("div",null,this._renderToggleButton(),React.createElement("div",{className:a},React.createElement("div",null,React.createElement("div",{className:"chat-widget_header color-bg"},React.createElement("div",{className:"chats-title"},this.state.showContact?React.createElement("h3",{className:"tit-hidden"},_easybook_add_ons.i18n.chat_fr_conver):React.createElement("div",null,React.createElement("a",{className:"back-to-list",onClick:this.showContact},React.createElement("i",{className:"fa fa-chevron-left"})),React.createElement("h3",{className:"title-chats"},_easybook_add_ons.i18n.chat_fr_cwith,React.createElement("a",{href:"#"}," ",e)))),React.createElement("div",{className:"chats-desc"},""!=_easybook_add_ons.chatbox_message&&React.createElement("div",{className:"chatbox-desc",dangerouslySetInnerHTML:{__html:_easybook_add_ons.chatbox_message}}),React.createElement("svg",{viewBox:"0 0 500 120",preserveAspectRatio:"none"},React.createElement("path",{d:"M0,50 C200,95 320, 12 500,65 L500,200 L00,200 Z"})))),this._renderContacts(t),this._renderReplies(t))))}}]),n}();n.default=d(function(e){return{chats:e.chats}},function(o){return{getContacts:function(){return o(l.getContacts())},changeContact:function(e){return o(l.changeContact(e))},getReplies:function(e,t){return o(l.getReplies(e,t))},chatReply:function(e,t,n,a){return o(l.chatReply(e,t,n,a))},updateFirstLastRID:function(e,t){return o(l.updateFirstLastRID(e,t))},getMoreTopReplies:function(e,t){return o(l.getMoreTopReplies(e,t))},resetChatsState:function(){return o(l.resetChatsState())}}})(p)},{"../actions/ChatActions":13,"./Chats":15,"./inners/Contact":17,"./inners/Reply":18}],17:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"_checkActiveContact",value:function(e){return e==this.props.activeContact?"contact-item active":"contact-item"}},{key:"render",value:function(){var t=this,n=this.props.item;return React.createElement("a",{className:this._checkActiveContact(n.cid),href:"#",onClick:function(e){return t.props.changeContact(n,e)}},React.createElement("div",{className:"contact-avatar"},React.createElement("img",{alt:n.display_name,className:"avatar avatar-150 photo",height:"150",width:"150",src:n.avatar_url})),React.createElement("div",{className:"contact-content"},React.createElement("h4",{className:"display_name"},n.display_name),React.createElement("span",{className:"contact-date"},n.date),React.createElement("div",{className:"contact-reply-text",dangerouslySetInnerHTML:{__html:n.reply.replace(/\n/g,"<br />")}})))}}]),t}();n.default=c},{}],18:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"_replyClasses",value:function(e){var t="chat-reply chat-reply-"+e.crid;return e.uid!=e.user_one&&(t+=" chat-reply-reply"),e.uid==e.current_user&&(t+=" your-reply"),t}},{key:"render",value:function(){var e=this.props.item;return React.createElement("div",{className:this._replyClasses(e)},React.createElement("div",{className:"reply-avatar"},React.createElement("img",{alt:e.display_name,className:"avatar avatar-150 photo",height:"150",width:"150",src:e.avatar_url}),React.createElement("span",{className:"display_name"},e.display_name)),React.createElement("div",{className:"reply-content"},React.createElement("span",{className:"reply-time",dangerouslySetInnerHTML:{__html:e.time}}),React.createElement("div",{className:"reply-text",dangerouslySetInnerHTML:{__html:e.reply.replace(/\n/g,"<br />")}})))}}]),t}();n.default=c},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.default.chats,t=arguments[1];switch(t.type){case c.GET_CONTACTS_SUCCESS:var n={contacts:t.chat.contacts,replies:t.chat.replies,active:t.chat.active,touid:t.chat.touid,fuid:t.chat.fuid};return 0==e.firstLoaded&&(n.firstLoaded=!0),Object.assign({},e,n);case c.GET_REPLIES_SUCCESS:if(0==t.lastRID){var a={replies:t.replies,noReplyNum:0};return t.replies.length?(a.firstRemain=!0,a.firstRID=t.replies[0].crid,a.lastRID=t.replies[t.replies.length-1].crid):(a.firstRemain=!1,a.firstRID=0,a.lastRID=0),Object.assign({},e,a)}return 0==t.replies.length?Object.assign({},e,{noReplyNum:e.noReplyNum+1}):Object.assign({},e,{noReplyNum:0,replies:[].concat(i(e.replies),i(t.replies))});case c.GET_MORE_TOP_REPLIES_SUCCESS:var o={replies:[].concat(i(t.replies),i(e.replies))};return t.replies.length||(o.firstRemain=!1),Object.assign({},e,o);case c.CHANGE_CONTACT_SUCCESS:return Object.assign({},e,{active:t.contact.cid,touid:t.contact.touid,fuid:t.contact.user_one});case c.REPLY_SUCCESS:return Object.assign({},e,{replies:[].concat(i(e.replies),[t.reply])});case c.UPDATE_FIRST_LAST_RID_SUCCESS:return Object.assign({},e,{firstRID:t.firstRID,lastRID:t.lastRID});case c.RESET_CHATS_STATE_SUCCESS:return r.default.chats;case"NEW_CONTACT":return[].concat(i(e),[t.contact]);default:return e}};var a,o=e("./initialState"),r=(a=o)&&a.__esModule?a:{default:a},c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../actions/actionTypes"));function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}},{"../actions/actionTypes":14,"./initialState":20}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={profile:{},chats:{contacts:[],replies:[],firstLoaded:!1,active:0,touid:0,fuid:0,firstRemain:!0,firstRID:0,lastRID:0,noReplyNum:0},sidebar:{listings:_easybook_dashboard.update_status.count_listings,bookings:0,reviews:_easybook_dashboard.update_status.comments},listings:{posts:[],pagi:{pages:1,paged:1}},reviews:{comments:[],pagi:{pages:1,paged:1}},bookings:{posts:[],pagi:{pages:1,paged:1}},changpass:{success:!1},content:{},dashboard:{notifications:[],statistics:[]},listingType:"",listing:{fields:[],rFields:[],post:{},rooms:[],coupons:[],isAdding:!1,isEditing:!1},redirect:{status:!1,url:""},withdrawals:{posts:[],pagi:{pages:1,paged:1},earning:0},messages:[],invoices:{posts:[],pagi:{pages:1,paged:1},postid:{}},invoice:{},chart:[],earnings:{posts:[],pagi:{pages:1,paged:1}},adcampaigns:{posts:[],pagi:{pages:1,paged:1}}}},{}]},{},[11]);